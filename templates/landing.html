<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PathFinder Python Web Editor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/landing.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="landing-container">
        <!-- 헤더 -->
        <header class="landing-header">
            <div class="header-content">
                <div class="logo-section">
                    <img src="{{ url_for('static', filename='img/app-logo.png') }}" alt="PathFinder Logo" class="logo">
                    <h1>PathFinder Python Web Editor</h1>
                </div>
                <div class="header-actions">
                    {% if is_guest %}
                        <div class="user-info">
                            <span class="welcome-text">안녕하세요, {{ username }}님!</span>
                            <a href="{{ url_for('login') }}" class="btn btn-primary">로그인</a>
                            <a href="{{ url_for('login') }}?mode=register" class="btn btn-secondary">회원가입</a>
                        </div>
                    {% else %}
                        <div class="user-info">
                            <span class="welcome-text">안녕하세요, {{ username }}님!</span>
                            <a href="{{ url_for('main') }}" class="btn btn-primary">대시보드</a>
                            <a href="{{ url_for('logout') }}" class="btn btn-secondary">로그아웃</a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </header>

        <!-- 메인 콘텐츠 -->
        <main class="landing-main">
            <!-- 히어로 섹션 -->
            <section class="hero-section">
                <div class="hero-content">
                    {% if is_guest %}
                        <h2>로봇을 위한 Python 웹 에디터</h2>
                        <p class="hero-description">
                            PathFinder 키트와 함께 사용하는 웹 기반 Python 에디터로<br>
                            로봇을 프로그래밍하고 실시간으로 제어하세요.
                        </p>
                        <div class="hero-actions">
                            <a href="{{ url_for('login') }}" class="btn btn-large btn-primary">
                                <i class="fas fa-play"></i> 시작하기
                            </a>
                            <a href="#features" class="btn btn-large btn-outline">
                                <i class="fas fa-info-circle"></i> 더 알아보기
                            </a>
                        </div>
                    {% else %}
                        <h2>환영합니다, {{ username }}님!</h2>
                        <p class="hero-description">
                            PathFinder Python Web Editor에 오신 것을 환영합니다.<br>
                            로봇을 프로그래밍하고 실시간으로 제어해보세요.
                        </p>
                        <div class="hero-actions">
                            <a href="{{ url_for('main') }}" class="btn btn-large btn-primary">
                                <i class="fas fa-tachometer-alt"></i> 대시보드로 이동
                            </a>
                            <a href="{{ url_for('editor') }}" class="btn btn-large btn-outline">
                                <i class="fas fa-code"></i> 에디터 바로가기
                            </a>
                        </div>
                    {% endif %}
                </div>
                <div class="hero-image">
                    <img src="{{ url_for('static', filename='img/screenshot-main.png') }}" alt="PathFinder Editor Screenshot">
                </div>
            </section>

            <!-- 특징 섹션 -->
            <section id="features" class="features-section">
                <div class="container">
                    <h3>주요 특징</h3>
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-code"></i>
                            </div>
                            <h4>실시간 코드 실행</h4>
                            <p>웹 브라우저에서 Python 코드를 작성하고 로봇에서 즉시 실행할 수 있습니다.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-robot"></i>
                            </div>
                            <h4>로봇 제어</h4>
                            <p>PathFinder 키트의 센서와 모터를 직접 제어하여 다양한 로봇 프로젝트를 구현하세요.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-wifi"></i>
                            </div>
                            <h4>무선 연결</h4>
                            <p>Wi-Fi를 통해 로봇과 연결되어 케이블 없이도 자유롭게 프로그래밍할 수 있습니다.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h4>실시간 모니터링</h4>
                            <p>센서 데이터와 로봇 상태를 실시간으로 모니터링하고 시각화할 수 있습니다.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-graduation-cap"></i>
                            </div>
                            <h4>교육용 튜토리얼</h4>
                            <p>단계별 튜토리얼을 통해 Python과 로봇 프로그래밍을 쉽게 배울 수 있습니다.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <h4>다중 사용자 지원</h4>
                            <p>여러 사용자가 동시에 로봇을 사용할 수 있으며, 각자의 계정으로 관리됩니다.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 사용법 섹션 -->
            <section class="how-to-section">
                <div class="container">
                    <h3>사용 방법</h3>
                    <div class="steps">
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>PathFinder 키트 준비</h4>
                                <p>PathFinder 키트를 준비하고 전원을 켜세요. AP 모드로 시작됩니다.</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Wi-Fi 연결 설정</h4>
                                <p>키트의 웹 인터페이스에서 Wi-Fi 정보를 입력하여 인터넷에 연결하세요.</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>계정 생성 및 로그인</h4>
                                <p>이 웹사이트에서 계정을 생성하고 로그인하세요.</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4>로봇 연결 및 프로그래밍</h4>
                                <p>에디터에서 로봇을 선택하고 Python 코드를 작성하여 실행하세요.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 스크린샷 섹션 -->
            <section class="screenshots-section">
                <div class="container">
                    <h3>스크린샷</h3>
                    <div class="screenshots-grid">
                        <div class="screenshot-item">
                            <img src="{{ url_for('static', filename='img/screenshot-main.png') }}" alt="메인 에디터 화면">
                            <h4>메인 에디터</h4>
                            <p>코드 작성 및 실행을 위한 메인 인터페이스</p>
                        </div>
                        <div class="screenshot-item">
                            <img src="{{ url_for('static', filename='img/screenshot-widgets.png') }}" alt="위젯 화면">
                            <h4>위젯 시스템</h4>
                            <p>센서 데이터 시각화 및 로봇 제어 위젯</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CTA 섹션 -->
            <section class="cta-section">
                <div class="container">
                    {% if is_guest %}
                        <h3>지금 시작하세요!</h3>
                        <p>PathFinder 키트와 함께 Python 로봇 프로그래밍의 세계로 떠나보세요.</p>
                        <div class="cta-actions">
                            <a href="{{ url_for('login') }}" class="btn btn-large btn-primary">
                                <i class="fas fa-sign-in-alt"></i> 로그인
                            </a>
                            <a href="{{ url_for('login') }}?mode=register" class="btn btn-large btn-secondary">
                                <i class="fas fa-user-plus"></i> 회원가입
                            </a>
                        </div>
                    {% else %}
                        <h3>로봇 프로그래밍을 시작하세요!</h3>
                        <p>{{ username }}님, PathFinder 키트와 함께 Python 로봇 프로그래밍의 세계를 탐험해보세요.</p>
                        <div class="cta-actions">
                            <a href="{{ url_for('main') }}" class="btn btn-large btn-primary">
                                <i class="fas fa-tachometer-alt"></i> 대시보드
                            </a>
                            <a href="{{ url_for('editor') }}" class="btn btn-large btn-secondary">
                                <i class="fas fa-code"></i> 에디터
                            </a>
                        </div>
                    {% endif %}
                </div>
            </section>
        </main>

        <!-- 푸터 -->
        <footer class="landing-footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-section">
                        <h4>PathFinder Python Web Editor</h4>
                        <p>로봇을 위한 웹 기반 Python 에디터</p>
                    </div>
                    <div class="footer-section">
                        <h4>기능</h4>
                        <ul>
                            <li>실시간 코드 실행</li>
                            <li>로봇 제어</li>
                            <li>무선 연결</li>
                            <li>실시간 모니터링</li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h4>지원</h4>
                        <ul>
                            <li>튜토리얼</li>
                            <li>문서</li>
                            <li>커뮤니티</li>
                            <li>기술 지원</li>
                        </ul>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2025 PathFinder Python Web Editor. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // 로그인 상태 확인
        async function checkAuthStatus() {
            try {
                const response = await fetch('/api/auth/check');
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('로그인 상태 확인 오류:', error);
                return { authenticated: false };
            }
        }

        // 시작하기 버튼 클릭 처리
        async function handleStartButton(event) {
            event.preventDefault();
            
            const authStatus = await checkAuthStatus();
            
            if (authStatus.authenticated) {
                // 로그인된 사용자는 /main으로 리다이렉트
                window.location.href = '/main';
            } else {
                // 로그인하지 않은 사용자는 로그인 페이지로 리다이렉트
                window.location.href = '/login';
            }
        }

        // 시작하기 버튼에 이벤트 리스너 추가
        document.addEventListener('DOMContentLoaded', function() {
            const startButtons = document.querySelectorAll('a[href="{{ url_for("login") }}"]');
            startButtons.forEach(button => {
                if (button.textContent.includes('시작하기')) {
                    button.addEventListener('click', handleStartButton);
                }
            });
            
            // CTA 섹션의 시작하기 버튼도 처리
            const ctaStartButtons = document.querySelectorAll('a[href="{{ url_for("login") }}"]');
            ctaStartButtons.forEach(button => {
                if (button.textContent.includes('로그인')) {
                    // CTA 섹션의 로그인 버튼은 그대로 유지
                }
            });
        });

        // 부드러운 스크롤
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // 스크롤 시 헤더 스타일 변경
        window.addEventListener('scroll', function() {
            const header = document.querySelector('.landing-header');
            if (window.scrollY > 100) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });
    </script>
</body>
</html>
